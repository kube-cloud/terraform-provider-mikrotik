# mikrotik_ipsec_policy (Resource)
Manages a IPSec Policy resource within MikroTik device.

## Example Usage
```terraform
# Define Proposal
resource "mikrotik_ipsec_proposal" "proposal" {
  name = "ipsec-proposal"
  auth_algorithms = "sha512,sha256,sha1"
  enc_algorithms = "aes-256-cbc,aes-192-cbc,aes-128-cbc"
  lifetime = "30m"
  pfs_group = "modp2048"
  disabled = false
}

# Define IPSec Profile
resource "mikrotik_ipsec_profile" "profile" {
  name = "ipsec-profile"
  dh_group ="modp2048"
  dpd_interval = "2m"
  dpd_max_failure = 5
  enc_algorithms = "aes-256,aes-192,aes-128"
  hash_algorithm = "sha1"
  lifetime = "1h30m"
  nat_traversal = true
  proposal_check = "obey"
}

# Define IPSec Peer
resource "mikrotik_ipsec_peer" "peer" {
  name = "ipsec-peer"
  address = "192.16.2.14/32"
  profile = mikrotik_ipsec_profile.profile.name
  exchange_mode = "ike2"
  send_initial_contact = false
  passive = true
  local_address = "192.16.3.19"
  port = 0
}

# Define IPSec Policy
resource "mikrotik_ipsec_policy" "policy" {
  peer = mikrotik_ipsec_peer.peer.name
  tunnel = true
  source_address = "172.20.0.0/16"
  source_port = 0
  destination_address = "10.20.0.0/16"
  destination_port = 0
  protocol = "all"
  template = false
  action = "encrypt"
  level = "require"
  ipsec_protocol = "esp"
  proposal = mikrotik_ipsec_proposal.proposal.name
  disabled = false
}
```

<!-- schema generated by tfplugindocs -->
## Schema

### Required

- `destination_address` (String) IPSec Policy Destination Address.
- `peer` (String) IPSec Policy Peer.
- `proposal` (String) IPSec Policy Proposal.
- `source_address` (String) IPSec Policy Source Address

### Optional

- `action` (String) IPSec Policy Action. Default: `encrypt`.
- `destination_port` (Number) IPSec Policy Destination Port. Default: `0`.
- `disabled` (Boolean) IPSec Policy is Disabled. Default: `false`.
- `ipsec_protocol` (String) IPSec Policy IPSec Protocol. Default: `esp`.
- `level` (String) IPSec Policy Level. Default: `require`.
- `protocol` (String) IPSec Policy Protocol. Default: `all`.
- `source_port` (Number) IPSec Policy Source Port. Default: `0`.
- `template` (Boolean) IPSec Policy is Template. Default: `false`.
- `tunnel` (Boolean) IPSec Policy Tunnel Flag. Default: `true`.

### Read-Only

- `id` (String) The ID of this resource.

## Import
Import is supported using the following syntax:
```shell
terraform import mikrotik_ipsec_policy.identity <policy-id>
```
